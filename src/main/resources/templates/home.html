<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Интерактивный календарь с формой</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.css" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/locales/ru.js"></script>
</head>
<body style="background-color: #ecf4ff;">
<input id="groupId" type="hidden" th:value="${groupId}">
<div class="container mt-4" style="max-width: 1050px;">
    <div class="card">
        <div class="card-header">
            <h2 class="text-center">MyTaskManager</h2>
        </div>
        <div class="card-body">
            <div class="row justify-content-center">
                <div class="col-md-12 mb-2">
                    <div id="calendar"></div>
                </div>
            </div>
        </div>
    </div>
</div>



<style>
    .card {
        border: none;
        box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.1);
    }

    .card-header {
        background-color: #ff3a01;
        color: white;
        padding: 10px;
        border-bottom: none;
    }


</style>
<div class="modal fade" id="eventModalNew" tabindex="-1" role="dialog" aria-labelledby="eventModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content p-3">
            <div id="taskForm" style="display: block;">
                <h3 class="mb-3">Создать задачу</h3>
                <form id="createTaskForm">
                    <div class="form-group">
                        <label for="title">Заголовок:</label>
                        <input type="text" class="form-control" id="title" name="title">
                    </div>
                    <div class="form-group">
                        <label for="description">Описание:</label>
                        <textarea class="form-control" id="description" name="description"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="dateOfStart">Дата начала:</label>
                        <input type="datetime-local" class="form-control" id="dateOfStart" name="dateOfStart">
                    </div>
                    <div class="form-group">
                        <label for="dateOfEnd">Дата окончания:</label>
                        <input type="datetime-local" class="form-control" id="dateOfEnd" name="dateOfEnd">
                    </div>
                    <div th:if="${mode == mode.ROLE_ADMIN}">
                    <div class="form-group">
                        <select id="user_selected" class="form-select" aria-label="Default select example">
                            <option selected disabled>Выберите пользователя</option>
                            <!-- Проходите по пользователям и заполняйте варианты выпадающего списка -->
                            <option th:each="user : ${users}" th:value="${user.id}" th:text="${user.login}"></option>
                        </select>
                    </div>
                    </div>
                    <div th:unless="${mode == mode.ROLE_ADMIN}">
                        <p>Для назначения задач другим участникам группы ваша роль должна быть: ADMIN</p>
                    </div>
                    <input type="hidden" id="selectedUserId" name="selectedUserId">
                    <div class="form-group">
                        <label for="allDay">Задача на весь день:</label>
                        <input type="checkbox" class="form-check-input" id="allDay" name="allDay">
                    </div>
                    <input type="submit" value="Создать" id="createButton" class="btn btn-primary">
                </form>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="eventModal" tabindex="-1" role="dialog" aria-labelledby="eventModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div id="head" class="card-header">
                <div class="d-flex align-items-center">
                    <h5 class="modal-title m-3 me-2" id="eventModalLabel" style="font-size: 24px">Информация о задаче</h5>
                    <ion-icon class="fs-1" name="clipboard-outline" style="margin-left: auto;"></ion-icon>
                </div>
            </div>
            <div class="modal-body">
                <div class="d-flex align-items-center">
                    <ion-icon class="fs-1 me-2" name="bookmark-sharp"></ion-icon>
                    <p class="modal-title m-0" id="eventTitle" style="align-self: center; font-size: 18px; font-weight: bold;">Заголовок</p>
                </div>
                <hr>
                <div class="d-flex align-items-center">
                    <ion-icon class="fs-1 me-2" name="document-text-outline"></ion-icon>
                    <p class="modal-title m-0" id="eventDescription" style="align-self: center;">Описание</p>
                </div>
                <hr>
                <div class="d-flex align-items-center">
                    <ion-icon class="fs-1 me-2" name="document-text-outline"></ion-icon>
                    <p class="modal-title m-0" id="eventUser" style="align-self: center;">Задачу получил</p>
                </div>

                <hr>
                <div class="d-flex align-items-center">
                    <ion-icon class="fs-1 me-2" name="calendar-number-outline"></ion-icon>
                    <p class="modal-title m-0 font-weight-bold" id="eventDateStart" style="align-self: center; font-size: 18px; font-weight: bold;">Дата старта</p>
                </div>
                <hr>
                <div class="d-flex align-items-center">
                    <ion-icon id = 'icon' class="fs-1 me-2" name="trending-up-outline"></ion-icon>

                    <p class="modal-title m-0 font-weight-bold" id="eventStatus"
                       style="align-self: center; font-size: 18px; font-weight: bold;"> Статус </p>

                </div>
                <hr>
                <div class="d-flex align-items-center">
                    <ion-icon class="fs-1 me-2" name="calendar-number-outline"></ion-icon>
                    <p class="modal-title m-0 font-weight-bold" id="eventDateEnd" style="align-self: center; font-size: 18px; font-weight: bold;">Дата финиша</p>
                </div>
                <hr>
                <button class="btn rounded-pill px-3" type="button" style="background-color: #ff3a01;color: white;" id="editButton"> Изменить </button>

                <button class="btn rounded-pill px-2" type="button" style="background-color: #65f346;color: white;" id="completedButton">
                    <ion-icon name="checkmark-outline" style="font-size: 1.7rem; vertical-align: middle;"></ion-icon>
                </button>

                <button class="btn btn-danger rounded-pill px-2" type="button" id="deleteButton">
                    <ion-icon name="trash-outline" style="font-size: 1.7rem; vertical-align: middle;"></ion-icon>
                </button>
            </div>
        </div>
    </div>
</div>
<script>
    // Обработчик изменения выбранного пользователя
    document.getElementById("user_selected").addEventListener("change", function() {
        const selectedUserId = this.value;
        document.getElementById("selectedUserId").value = selectedUserId;
    });
</script>
<script src="/app.js"></script>
<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</body>
</html>
